tag @s remove magus_unstable_check_tier_1
tag @s remove magus_unstable_check_tier_2
tag @s remove magus_unstable_check_tier_3
execute if entity @s[nbt={SelectedItem:{id:"minecraft:amethyst_shard",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_1":1}}}}}] run give @s amethyst_shard[consumable={consume_seconds:1.5,animation:"block",sound:"block.trial_spawner.ambient",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,amethyst_wand:1b},custom_name='{"italic":false,"text":"Amethyst Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"1.5 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.9 Stability"}'],enchantments={"kiwi:magus_wand_tier_1":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:blaze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_1":1}}}}}] run give @s blaze_rod[consumable={consume_seconds:0.7,animation:"block",sound:"entity.blaze.burn",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,nether_wand:1b},custom_name='{"italic":false,"text":"Nether Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"0.7 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1.2 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.7 Stability"}'],enchantments={"kiwi:magus_wand_tier_1":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:breeze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_1":1}}}}}] run give @s breeze_rod[consumable={consume_seconds:1.2,animation:"block",sound:"block.bubble_column.whirlpool_ambient",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,aquatic_wand:1b},custom_name='{"italic":false,"text":"Aquatic Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"1.2 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1.6 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.9 Stability"}'],enchantments={"kiwi:magus_wand_tier_1":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:stick",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_1":1}}}}}] run give @s stick[consumable={consume_seconds:1,animation:"block",sound:"minecraft:block.trial_spawner.ambient",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,netherite_wand:1b},custom_name='{"italic":false,"text":"Netherite Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"1 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1.4 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.95 Stability"}'],enchantments={"kiwi:magus_wand_tier_1":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:amethyst_shard",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_2":1}}}}}] run give @s amethyst_shard[consumable={consume_seconds:1.5,animation:"block",sound:"block.trial_spawner.ambient",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,amethyst_wand:1b},custom_name='{"italic":false,"text":"Amethyst Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"1.5 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.9 Stability"}'],enchantments={"kiwi:magus_wand_tier_2":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:blaze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_2":1}}}}}] run give @s blaze_rod[consumable={consume_seconds:0.7,animation:"block",sound:"entity.blaze.burn",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,nether_wand:1b},custom_name='{"italic":false,"text":"Nether Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"0.7 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1.2 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.7 Stability"}'],enchantments={"kiwi:magus_wand_tier_2":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:breeze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_2":1}}}}}] run give @s breeze_rod[consumable={consume_seconds:1.2,animation:"block",sound:"block.bubble_column.whirlpool_ambient",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,aquatic_wand:1b},custom_name='{"italic":false,"text":"Aquatic Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"1.2 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1.6 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.9 Stability"}'],enchantments={"kiwi:magus_wand_tier_2":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:stick",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_2":1}}}}}] run give @s stick[consumable={consume_seconds:1,animation:"block",sound:"minecraft:block.trial_spawner.ambient",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,netherite_wand:1b},custom_name='{"italic":false,"text":"Netherite Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"1 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1.4 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.95 Stability"}'],enchantments={"kiwi:magus_wand_tier_2":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:amethyst_shard",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_3":1}}}}}] run give @s amethyst_shard[consumable={consume_seconds:1.5,animation:"block",sound:"block.trial_spawner.ambient",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,amethyst_wand:1b},custom_name='{"italic":false,"text":"Amethyst Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"1.5 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.9 Stability"}'],enchantments={"kiwi:magus_wand_tier_3":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:blaze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_3":1}}}}}] run give @s blaze_rod[consumable={consume_seconds:0.7,animation:"block",sound:"entity.blaze.burn",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,nether_wand:1b},custom_name='{"italic":false,"text":"Nether Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"0.7 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1.2 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.7 Stability"}'],enchantments={"kiwi:magus_wand_tier_3":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:breeze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_3":1}}}}}] run give @s breeze_rod[consumable={consume_seconds:1.2,animation:"block",sound:"block.bubble_column.whirlpool_ambient",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,aquatic_wand:1b},custom_name='{"italic":false,"text":"Aquatic Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"1.2 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1.6 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.9 Stability"}'],enchantments={"kiwi:magus_wand_tier_3":1}] 1
execute if entity @s[nbt={SelectedItem:{id:"minecraft:stick",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_3":1}}}}}] run give @s stick[consumable={consume_seconds:1,animation:"block",sound:"minecraft:block.trial_spawner.ambient",has_consume_particles:false,on_consume_effects:[{type:"minecraft:play_sound",sound:"entity.illusioner.cast_spell"}]},custom_data={magus_wand:1b,netherite_wand:1b},custom_name='{"italic":false,"text":"Netherite Wand"}',lore=['" "','{"color":"gray","italic":false,"text":"When Held:"}','{"color":"dark_green","italic":false,"text":"1 Casting Speed"}','{"color":"dark_green","italic":false,"text":"1.4 Mana Efficiency"}','{"color":"dark_green","italic":false,"text":"0.95 Stability"}'],enchantments={"kiwi:magus_wand_tier_3":1}] 1

execute if entity @s[nbt={SelectedItem:{id:"minecraft:amethyst_shard",components:{"minecraft:custom_data":{magus_wand:1b}}}},tag=!magus_meditating] run scoreboard players set @s mana_efficiency 10
execute if entity @s[nbt={SelectedItem:{id:"minecraft:blaze_rod",components:{"minecraft:custom_data":{magus_wand:1b}}}},tag=!magus_meditating] run scoreboard players set @s mana_efficiency 12
execute if entity @s[nbt={SelectedItem:{id:"minecraft:breeze_rod",components:{"minecraft:custom_data":{magus_wand:1b}}}},tag=!magus_meditating] run scoreboard players set @s mana_efficiency 16
execute if entity @s[nbt={SelectedItem:{id:"minecraft:stick",components:{"minecraft:custom_data":{magus_wand:1b}}}},tag=!magus_meditating] run scoreboard players set @s mana_efficiency 14

execute if entity @s[nbt={SelectedItem:{id:"minecraft:amethyst_shard",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_1":1}}}}}] run function kiwi2:upgrades/classes/magus/spells/tier_1/tier_1_spell_cast_rotation
execute if entity @s[nbt={SelectedItem:{id:"minecraft:blaze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_1":1}}}}}] run function kiwi2:upgrades/classes/magus/spells/tier_1/tier_1_spell_cast_rotation
execute if entity @s[nbt={SelectedItem:{id:"minecraft:breeze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_1":1}}}}}] run function kiwi2:upgrades/classes/magus/spells/tier_1/tier_1_spell_cast_rotation
execute if entity @s[nbt={SelectedItem:{id:"minecraft:stick",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_1":1}}}}}] run function kiwi2:upgrades/classes/magus/spells/tier_1/tier_1_spell_cast_rotation

execute if entity @s[nbt={SelectedItem:{id:"minecraft:amethyst_shard",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_2":1}}}}},tag=!magus_meditating] run function kiwi2:upgrades/classes/magus/spells/tier_2/tier_2_spell_cast_rotation
execute if entity @s[nbt={SelectedItem:{id:"minecraft:blaze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_2":1}}}}},tag=!magus_meditating] run function kiwi2:upgrades/classes/magus/spells/tier_2/tier_2_spell_cast_rotation
execute if entity @s[nbt={SelectedItem:{id:"minecraft:breeze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_2":1}}}}},tag=!magus_meditating] run function kiwi2:upgrades/classes/magus/spells/tier_2/tier_2_spell_cast_rotation
execute if entity @s[nbt={SelectedItem:{id:"minecraft:stick",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_2":1}}}}},tag=!magus_meditating] run function kiwi2:upgrades/classes/magus/spells/tier_2/tier_2_spell_cast_rotation

execute if entity @s[nbt={SelectedItem:{id:"minecraft:amethyst_shard",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_3":1}}}}},tag=!magus_meditating] run function kiwi2:upgrades/classes/magus/spells/tier_3/tier_3_spell_cast_rotation
execute if entity @s[nbt={SelectedItem:{id:"minecraft:blaze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_3":1}}}}},tag=!magus_meditating] run function kiwi2:upgrades/classes/magus/spells/tier_3/tier_3_spell_cast_rotation
execute if entity @s[nbt={SelectedItem:{id:"minecraft:breeze_rod",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_3":1}}}}},tag=!magus_meditating] run function kiwi2:upgrades/classes/magus/spells/tier_3/tier_3_spell_cast_rotation
execute if entity @s[nbt={SelectedItem:{id:"minecraft:stick",components:{"minecraft:custom_data":{magus_wand:1b},"minecraft:enchantments":{levels:{"kiwi:magus_wand_tier_3":1}}}}},tag=!magus_meditating] run function kiwi2:upgrades/classes/magus/spells/tier_3/tier_3_spell_cast_rotation

advancement revoke @s only kiwi2:magus_cast_spell