execute unless entity @n[distance=..3,tag=necromancer_summon] run title @s actionbar {"color":"red", "text": "No valid summons nearby!"}
execute unless entity @n[distance=..3,tag=necromancer_summon] run playsound entity.arrow.hit_player master @s ~ ~ ~ 1 0.5
execute unless entity @n[distance=..3,tag=necromancer_summon] run give @s minecraft:bone[minecraft:custom_name='{"italic":false,"text":"[ Soul of Unrest ]"}',minecraft:lore=['{"color":"gray","italic":false,"text":"[","extra":[{"color":"dark_green","bold":false,"italic":false,"keybind":"key.use"},{"color":"gray","italic":false,"text":"] on a Zombie summon to evolve it into a Ghoul."}]}','""','{"color":"gray","italic":false,"text":"Upgrades:"}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"red","bold":false,"italic":false,"text":"+20 Health"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"blue","bold":false,"italic":false,"text":"+0.1 Movement Speed"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"+4 Attack Damage"}]}','{"color":"#2070b6","italic":false,"text":"[ ON-HIT ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"Leeches a small amount of health when targeted enemies are hit."}]}','{"color":"dark_purple","italic":false,"text":"[ MISC ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"This entity\'s armor and weapon can not be modified."}]}','""','{"color":"red","italic":false,"text":"Existing weapons and armors will not be carried over."}'],minecraft:rarity=rare,minecraft:enchantment_glint_override=true,minecraft:custom_data={necromancer_soul_of_unrest:1b,necromancer_soul_upgrade:1b},minecraft:consumable={consume_seconds:0,animation:none,sound:"minecraft:entity.hoglin.converted_to_zombified",has_consume_particles:false},minecraft:item_model="minecraft:ender_eye"] 1

execute if entity @n[distance=..3,tag=zombie_evolved] run title @s actionbar {"color":"red", "text": "This summon has already evolved!"}
execute if entity @n[distance=..3,tag=zombie_evolved] run playsound entity.arrow.hit_player master @s ~ ~ ~ 1 0.5
execute if entity @n[distance=..3,tag=zombie_evolved] run give @s minecraft:bone[minecraft:custom_name='{"italic":false,"text":"[ Soul of Unrest ]"}',minecraft:lore=['{"color":"gray","italic":false,"text":"[","extra":[{"color":"dark_green","bold":false,"italic":false,"keybind":"key.use"},{"color":"gray","italic":false,"text":"] on a Zombie summon to evolve it into a Ghoul."}]}','""','{"color":"gray","italic":false,"text":"Upgrades:"}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"red","bold":false,"italic":false,"text":"+20 Health"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"blue","bold":false,"italic":false,"text":"+0.1 Movement Speed"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"+4 Attack Damage"}]}','{"color":"#2070b6","italic":false,"text":"[ ON-HIT ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"Leeches a small amount of health when targeted enemies are hit."}]}','{"color":"dark_purple","italic":false,"text":"[ MISC ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"This entity\'s armor and weapon can not be modified."}]}','""','{"color":"red","italic":false,"text":"Existing weapons and armors will not be carried over."}'],minecraft:rarity=rare,minecraft:enchantment_glint_override=true,minecraft:custom_data={necromancer_soul_of_unrest:1b,necromancer_soul_upgrade:1b},minecraft:consumable={consume_seconds:0,animation:none,sound:"minecraft:entity.hoglin.converted_to_zombified",has_consume_particles:false},minecraft:item_model="minecraft:ender_eye"] 1

tag @n[distance=..3,limit=1,type=zombie,tag=zombie,tag=!zombie_evolved] add ghoul
tag @n[distance=..3,limit=1,type=zombie,tag=zombie,tag=!zombie_evolved] add necromancer_summon_unwieldy
attribute @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] max_health modifier add necromancer_ghoul_max_health 20 add_value
attribute @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] movement_speed modifier add necromancer_ghoul_movement_speed 0.1 add_value
attribute @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] attack_damage modifier add necromancer_ghoul_attack_damage 4 add_value
data merge entity @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] {CustomName:'{"text":"[ Ghoul ]"}',ArmorItems:[{id:"minecraft:leather_boots",count:1,components:{"minecraft:dyed_color":8100136}},{id:"minecraft:leather_leggings",count:1,components:{"minecraft:dyed_color":10335568}},{id:"minecraft:leather_chestplate",count:1,components:{"minecraft:dyed_color":9941075}},{id:"minecraft:player_head",count:1,components:{"minecraft:profile":{properties:[{name:"textures",value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTAxODJiMzZiMzdmZDJkMGI1ZGY4OGI1ZTMwOTIyOWIzNDRjNTNjZjIxZGQyNWZjNzRmZWFiOTgwNGVjMTBjNyJ9fX0="}]}}}]}
effect give @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] instant_damage 3 25 true
execute as @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] at @s run particle minecraft:block_crumble{block_state:"redstone_block"} ~ ~1 ~ 0.5 0.7 0.5 1 30
execute as @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] at @s run particle minecraft:sculk_soul ~ ~1 ~ 0.5 0.8 0.5 0.2 25
execute as @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] at @s run particle minecraft:witch ~ ~1 ~ 0.5 0.8 0.5 0.2 15
execute as @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] at @s run playsound minecraft:entity.phantom.hurt hostile @a[distance=..32] ~ ~ ~ 1 0
execute as @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] at @s run playsound minecraft:entity.shulker.ambient hostile @a[distance=..32] ~ ~ ~ 1 0
execute as @n[distance=..3,limit=1,tag=ghoul,tag=!zombie_evolved] at @s run playsound minecraft:entity.fox.screech hostile @a[distance=..32] ~ ~ ~ 1 0
tag @n[distance=..3,limit=1,type=zombie,tag=ghoul] add zombie_evolved
