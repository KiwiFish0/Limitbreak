execute unless entity @n[distance=..3,tag=necromancer_summon] run title @s actionbar {"color":"red", "text": "No valid summons nearby!"}
execute unless entity @n[distance=..3,tag=necromancer_summon] run playsound entity.arrow.hit_player master @s ~ ~ ~ 1 0.5
execute unless entity @n[distance=..3,tag=necromancer_summon] run give @s minecraft:bone[minecraft:custom_name='{"italic":false,"text":"[ Soul of Burden ]"}',minecraft:lore=['{"color":"gray","italic":false,"text":"[","extra":[{"color":"dark_green","bold":false,"italic":false,"keybind":"key.use"},{"color":"gray","italic":false,"text":"] on a Gravemite summon to evolve it into a Gravemite Behemoth."}]}','{"color":"gray","italic":false,"text":"[","extra":[{"color":"dark_green","bold":false,"italic":false,"keybind":"key.use"},{"color":"gray","italic":false,"text":"] on any summon to select it as a passenger for a Gravemite Behemoth."}]}','{"text":""}','{"color":"gray","italic":false,"text":"Upgrades:"}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"red","bold":false,"italic":false,"text":"+8 Health"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"green","bold":false,"italic":false,"text":"+1 Scale"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"blue","bold":false,"italic":false,"text":"+0.1 Movement Speed"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"-3 Attack Damage"}]}','{"color":"#9620b6","italic":false,"text":"[ SKILL ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"This entity becomes rideable to nearby summons."}]}','{"text":""}','{"color":"gray","italic":false,"text":"Existing weapons and armors will be carried over."}'],minecraft:rarity=rare,minecraft:enchantment_glint_override=true,minecraft:custom_data={necromancer_soul_of_burden:1b,necromancer_soul_upgrade:1b},minecraft:consumable={consume_seconds:0,animation:none,sound:"minecraft:entity.phantom.bite",has_consume_particles:false},minecraft:item_model="minecraft:ender_eye"] 1

execute if entity @n[distance=..3,tag=gravemite_evolved] run title @s actionbar {"color":"red", "text": "This summon has already evolved!"}
execute if entity @n[distance=..3,tag=gravemite_evolved] run playsound entity.arrow.hit_player master @s ~ ~ ~ 1 0.5
execute if entity @n[distance=..3,tag=gravemite_evolved] run give @s minecraft:bone[minecraft:custom_name='{"italic":false,"text":"[ Soul of Burrowing ]"}',minecraft:lore=['{"color":"gray","italic":false,"text":"[","extra":[{"color":"dark_green","bold":false,"italic":false,"keybind":"key.use"},{"color":"gray","italic":false,"text":"] on a Gravemite summon to evolve it into a Gravemite Lurker."}]}','{"text":""}','{"color":"gray","italic":false,"text":"Upgrades:"}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"white","bold":false,"italic":false,"text":"+3 Armor"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"green","bold":false,"italic":false,"text":"-1 Scale"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"blue","bold":false,"italic":false,"text":"+0.15 Movement Speed"}]}','{"color":"#d79e2b","italic":false,"text":"[ STAT ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"+2 Attack Damage"}]}','{"color":"#9620b6","italic":false,"text":"[ SKILL ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"This entity gains the ability to burrow underground."}]}','{"color":"#9620b6","italic":false,"text":"[ SKILL ] ","extra":[{"color":"gray","bold":false,"italic":false,"text":"While underground, create ripples of evoker fangs on the surface."}]}','{"text":""}','{"color":"gray","italic":false,"text":"Existing weapons and armors will be carried over."}'],minecraft:rarity=rare,minecraft:enchantment_glint_override=true,minecraft:custom_data={necromancer_soul_of_burrowing:1b,necromancer_soul_upgrade:1b},minecraft:consumable={consume_seconds:0,animation:none,sound:"minecraft:entity.phantom.bite",has_consume_particles:false},minecraft:item_model="minecraft:ender_eye"] 1

execute if entity @n[distance=..3,tag=necromancer_summon,tag=!gravemite] run tellraw @s [{"color":"green","entity":"@n[distance=..3,tag=necromancer_summon,tag=!gravemite]","nbt":"CustomName"},{"color":"white","text":" has been selected as passenger. Move them towards the nearest Gravemite Behemoth."}]
execute if entity @n[distance=..3,tag=necromancer_summon,tag=!gravemite] run playsound entity.arrow.hit_player master @s ~ ~ ~ 1 1
execute if entity @n[distance=..3,tag=necromancer_summon,tag=!gravemite] run tag @n[distance=..3,tag=necromancer_summon,tag=!gravemite] add gravemite_behemoth_passenger_candidate

tag @n[distance=..3,limit=1,type=silverfish,tag=gravemite,tag=!gravemite_evolved] add gravemite_behemoth
tag @n[distance=..3,limit=1,type=silverfish,tag=gravemite,tag=!gravemite_evolved] add gravemite_behemoth_no_passenger
attribute @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] max_health modifier add necromancer_gravemite_behemoth_max_health 8 add_value
attribute @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] scale modifier add necromancer_gravemite_behemoth_scale 1 add_value
attribute @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] movement_speed modifier add necromancer_gravemite_behemoth_movement_speed 0.1 add_value
attribute @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] attack_damage modifier add necromancer_gravemite_behemoth_attack_damage -3 add_value
effect give @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] instant_health 3 25 true
data merge entity @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] {CustomName:'{"text":"[ Gravemite Behemoth ]"}'}
execute as @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] at @s run particle minecraft:infested ~ ~1 ~ 1 1 1 1 100
execute as @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] at @s run particle minecraft:sculk_soul ~ ~1 ~ 0.5 0.8 0.5 0.2 25
execute as @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] at @s run particle minecraft:explosion ~ ~1 ~ 0.5 0.8 0.5 0.2 15
execute as @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] at @s run playsound minecraft:entity.sniffer.death master @a[distance=..64] ~ ~ ~ 1 0
execute as @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] at @s run playsound minecraft:entity.strider.death master @a[distance=..64] ~ ~ ~ 1 0
execute as @n[distance=..3,limit=1,tag=gravemite_behemoth,tag=!gravemite_evolved] at @s run playsound minecraft:entity.fox.aggro master @a[distance=..64] ~ ~ ~ 1 0
tag @n[distance=..3,limit=1,type=silverfish,tag=gravemite_behemoth] add gravemite_evolved